<h1>Customer Dashboard</h1>
<p id="welcome"></p>
<button onclick="logout()">Logout</button>
<script>
  const token = localStorage.getItem('token');
  if (!token) window.location.href = "/static/auth.html";

  const payload = JSON.parse(atob(token.split('.')[1]));
  if (payload.role !== "customer") {
    // Redirect non-customers (including admin) to login or their dashboard
    window.location.href = "/static/auth.html";
  }

  document.getElementById("welcome").innerText = `Welcome, ${payload.sub}`;

  function logout() {
    localStorage.removeItem('token');
    window.location.href = "/static/auth.html";
  }
</script>
